plugins:
  extractors:
  - name: tap-googleads
    variant: matatika
    pip_url: git+https://github.com/Matatika/tap-googleads.git@v0.11.0
    select:
    - campaign_history.*
    - campaign_history_unsegmented.*
    - adgroups.*
    - ad_group_ad.*
    - ad_group_unsegmented.*
    - customer.*
    - label.*
    - keyword_view.*
    - video.*
    - ad_performance.*
    - ad_group_stats.*
    - keyword_stats.*
    - campaign_stats.*
    - ad_group_criterion.*
    config:
      start_date: 2025-01-01
      custom_queries:
      - name: "ad_group_unsegmented"
        query: >
          SELECT 
            ad_group.url_custom_parameters, 
            ad_group.type, 
            ad_group.tracking_url_template, 
            ad_group.targeting_setting.target_restrictions,
            ad_group.target_roas,
            ad_group.target_cpm_micros,
            ad_group.status,
            ad_group.target_cpa_micros,
            ad_group.resource_name,
            ad_group.percent_cpc_bid_micros,
            ad_group.name,
            ad_group.labels,
            ad_group.id,
            ad_group.final_url_suffix,
            ad_group.excluded_parent_asset_field_types,
            ad_group.effective_target_roas_source,
            ad_group.effective_target_roas,
            ad_group.effective_target_cpa_source,
            ad_group.effective_target_cpa_micros,
            ad_group.display_custom_bid_dimension,
            ad_group.cpv_bid_micros,
            ad_group.cpm_bid_micros,
            ad_group.cpc_bid_micros,
            ad_group.campaign,
            ad_group.base_ad_group,
            ad_group.ad_rotation_mode,
            campaign.resource_name,
            campaign.id,
            campaign.name
          FROM ad_group
        add_date_filter_to_query: false
      - name: "campaign_history_unsegmented"
        query: >
          SELECT 
            campaign.resource_name,
            campaign.id,
            campaign.name,
            customer.resource_name,
            customer.id,
            campaign.ad_serving_optimization_status,
            campaign.advertising_channel_sub_type,
            campaign.advertising_channel_type,
            campaign.experiment_type,
            campaign.end_date,
            campaign.final_url_suffix,
            campaign.frequency_caps,
            campaign.optimization_score,
            campaign.payment_mode,
            campaign.serving_status,
            campaign.start_date,
            campaign.status,
            campaign.tracking_url_template,
            campaign.vanity_pharma.vanity_pharma_display_url_mode,
            campaign.vanity_pharma.vanity_pharma_text,
            campaign.video_brand_safety_suitability
          FROM campaign
        add_date_filter_to_query: false
      - name: "ad_group_stats"
        query: >
          SELECT
            ad_group.resource_name,
            ad_group.id,
            campaign.id,
            customer.id,
            metrics.impressions,
            metrics.clicks,
            metrics.cost_micros,
            metrics.conversions,
            metrics.engagements,
            metrics.interactions,
            metrics.video_trueview_views,
            metrics.conversions_value,
            metrics.all_conversions,
            metrics.all_conversions_value,
            segments.date,
            segments.device
          FROM ad_group
        add_date_filter_to_query: true
        primary_keys: ["adGroup__id","segments__date","segments__device"]
        replication_key: "segments__date"
        replication_method: "INCREMENTAL"
      - name: "keyword_stats"
        query: >
          SELECT
            segments.date,
            segments.device,
            customer.id,
            campaign.id,
            metrics.cost_micros,
            metrics.impressions,
            metrics.clicks,
            metrics.conversions,
            metrics.conversions_value,
            ad_group.id,
            ad_group_criterion.criterion_id
          FROM keyword_view
        add_date_filter_to_query: true
        primary_keys: ["adGroup__id","campaign__id","customer__id","ad_group_criterion__criterion_id","segments__date","segments__device"]
        replication_key: "segments__date"
        replication_method: "INCREMENTAL"
      - name: "campaign_stats"
        query: >
          SELECT
            segments.date,
            segments.device,
            campaign.id,
            customer.id,
            metrics.impressions,
            metrics.clicks,
            metrics.cost_micros,
            metrics.conversions,
            metrics.conversions_value
          FROM campaign
        add_date_filter_to_query: true
        replication_key: "segments__date"
        replication_method: "INCREMENTAL"